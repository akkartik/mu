//: Allow mu programs to log facts just like we've been doing in C++ so far.

:(scenario "trace")
recipe main [
  trace [foo], [this is a trace in mu]
]
+foo: this is a trace in mu

:(before "End Primitive Recipe Declarations")
TRACE,
:(before "End Primitive Recipe Numbers")
Recipe_number["trace"] = TRACE;
:(before "End Primitive Recipe Implementations")
case TRACE: {
  assert(isa_literal(instructions[pc].ingredients[0]));
  string label = instructions[pc].ingredients[0].name;
  assert(isa_literal(instructions[pc].ingredients[1]));
  string message = instructions[pc].ingredients[1].name;
  trace(label) << message;
  break;
}
