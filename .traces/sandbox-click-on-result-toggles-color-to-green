9999 parse: instruction: trace-until
9999 parse:   ingredient: {name: "100", properties: ["100": "literal", "app": ]}
9999 parse: instruction: assume-screen
9999 parse:   ingredient: {name: "40", properties: ["40": "literal", "width": ]}
9999 parse:   ingredient: {name: "10", properties: ["10": "literal", "height": ]}
9999 parse: instruction: new
9999 parse:   ingredient: {name: " \nrecipe foo [\n  add 2, 2\n]", properties: [_: "literal-string"]}
9999 parse:   product: {name: "1", properties: ["1": "address":"array":"character"]}
9999 parse: instruction: new
9999 parse:   ingredient: {name: "foo", properties: [_: "literal-string"]}
9999 parse:   product: {name: "2", properties: ["2": "address":"array":"character"]}
9999 parse: instruction: assume-console
9999 parse:   ingredient: {name: "\n    press F4\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: new-programming-environment
9999 parse:   ingredient: {name: "screen", properties: ["screen": "address"]}
9999 parse:   ingredient: {name: "1", properties: ["1": "address":"array":"character"]}
9999 parse:   ingredient: {name: "2", properties: ["2": "address":"array":"character"]}
9999 parse:   product: {name: "3", properties: ["3": "address":"programming-environment-data"]}
9999 parse: instruction: event-loop
9999 parse:   ingredient: {name: "screen", properties: ["screen": "address"]}
9999 parse:   ingredient: {name: "console", properties: ["console": "address"]}
9999 parse:   ingredient: {name: "3", properties: ["3": "address":"programming-environment-data"]}
9999 parse: instruction: screen-should-contain
9999 parse:   ingredient: {name: "\n    .                     run (F4)           .\n    .                    ┊                   .\n    .recipe foo [        ┊━━━━━━━━━━━━━━━━━━━.\n    .  add 2, 2          ┊                  x.\n    .]                   ┊foo                .\n    .┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┊4                  .\n    .                    ┊━━━━━━━━━━━━━━━━━━━.\n    .                    ┊                   .\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: assume-console
9999 parse:   ingredient: {name: "\n    left-click 5, 21\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: run
9999 parse:   ingredient: {name: "\n    event-loop screen:address, console:address, 3:address:programming-environment-data\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: screen-should-contain-in-color
9999 parse:   ingredient: {name: "2", properties: ["2": "literal", "green": ]}
9999 parse:   ingredient: {name: "\n    .                                        .\n    .                                        .\n    .                                        .\n    .                                        .\n    .                                        .\n    .                     4                  .\n    .                                        .\n    .                                        .\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: run
9999 parse:   ingredient: {name: "\n    print-character screen:address, 9251/␣/cursor\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: screen-should-contain
9999 parse:   ingredient: {name: "\n    .                     run (F4)           .\n    .␣                   ┊                   .\n    .recipe foo [        ┊━━━━━━━━━━━━━━━━━━━.\n    .  add 2, 2          ┊                  x.\n    .]                   ┊foo                .\n    .┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┊4                  .\n    .                    ┊━━━━━━━━━━━━━━━━━━━.\n    .                    ┊                   .\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: assume-console
9999 parse:   ingredient: {name: "\n    left-click 3, 11  # cursor to end of line\n    press backspace\n    type [3]\n    press F4\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: run
9999 parse:   ingredient: {name: "\n    event-loop screen:address, console:address, 3:address:programming-environment-data\n  ", properties: [_: "literal-string"]}
9999 parse: instruction: screen-should-contain-in-color
9999 parse:   ingredient: {name: "1", properties: ["1": "literal", "red": ]}
9999 parse:   ingredient: {name: "\n    .                                        .\n    .                                        .\n    .                                        .\n    .                                        .\n    .                                        .\n    .                     5                  .\n    .                                        .\n    .                                        .\n  ", properties: [_: "literal-string"]}
9999 after-brace: recipe scenario-sandbox-click-on-result-toggles-color-to-green
9999 after-brace: trace-until ...
9999 after-brace: new-fake-screen ...
9999 after-brace: new ...
9999 after-brace: new ...
9999 after-brace: assume-console ...
9999 after-brace: new-programming-environment ...
9999 after-brace: event-loop ...
9999 after-brace: screen-should-contain ...
9999 after-brace: assume-console ...
9999 after-brace: run ...
9999 after-brace: screen-should-contain-in-color ...
9999 after-brace: run ...
9999 after-brace: screen-should-contain ...
9999 after-brace: assume-console ...
9999 after-brace: run ...
9999 after-brace: screen-should-contain-in-color ...
9999 new: routine allocated memory from 1000 to 101000
9999 schedule: scenario-sandbox-click-on-result-toggles-color-to-green
 101 run: trace-until 100/app
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 114 
  90 print-character: 117 
  90 print-character: 110 
  90 print-character: 32 
  90 print-character: 40 
  90 print-character: 70 
  90 print-character: 52 
  90 print-character: 41 
  90 print-character: 32 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 114 
  90 print-character: 101 
  90 print-character: 99 
  90 print-character: 105 
  90 print-character: 112 
  90 print-character: 101 
  90 print-character: 32 
  90 print-character: 102 
  90 print-character: 111 
  90 print-character: 111 
  90 print-character: 32 
  90 print-character: 91 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 97 
  90 print-character: 100 
  90 print-character: 100 
  90 print-character: 32 
  90 print-character: 50 
  90 print-character: 44 
  90 print-character: 32 
  90 print-character: 50 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 93 
  90 print-character: 102 
  90 print-character: 111 
  90 print-character: 111 
  10 app: next-event 
  90 print-character: 114 
  90 print-character: 117 
  90 print-character: 110 
  90 print-character: 110 
  90 print-character: 105 
  90 print-character: 110 
  90 print-character: 103 
  90 print-character: 46 
  90 print-character: 46 
  90 print-character: 46 
  90 print-character: 32 
  90 print-character: 32 
 100 run: screen <- render-all screen, env
  10 app: render all 
  11 app: render top menu 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 114 
  90 print-character: 117 
  90 print-character: 110 
  90 print-character: 32 
  90 print-character: 40 
  90 print-character: 70 
  90 print-character: 52 
  90 print-character: 41 
  90 print-character: 32 
  11 app: render divider 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  90 print-character: 9482 
  11 app: render recipes 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 114 
  90 print-character: 101 
  90 print-character: 99 
  90 print-character: 105 
  90 print-character: 112 
  90 print-character: 101 
  90 print-character: 32 
  90 print-character: 102 
  90 print-character: 111 
  90 print-character: 111 
  90 print-character: 32 
  90 print-character: 91 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 97 
  90 print-character: 100 
  90 print-character: 100 
  90 print-character: 32 
  90 print-character: 50 
  90 print-character: 44 
  90 print-character: 32 
  90 print-character: 50 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 93 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 9480 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  11 app: render sandbox side 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 120 
  90 print-character: 102 
  90 print-character: 111 
  90 print-character: 111 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 52 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  11 app: render status 
 100 run: break-if error?, 
 100 run: status:address:array:character <- new [            ]
 100 run: screen <- update-status screen, status, 245/grey
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: screen <- update-cursor screen, recipes, current-sandbox, *sandbox-in-focus?
 100 run: loop +next-event:label
 100 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
 100 run: loop-unless found?, 
 100 run: break-if quit?, 
  99 run: screen-should-contain [
    .                     run (F4)           .
    .                    ┊                   .
    .recipe foo [        ┊━━━━━━━━━━━━━━━━━━━.
    .  add 2, 2          ┊                  x.
    .]                   ┊foo                .
    .┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┊4                  .
    .                    ┊━━━━━━━━━━━━━━━━━━━.
    .                    ┊                   .
  ]
  99 run: assume-console [
    left-click 5, 21
  ]
  99 run: run [
    event-loop screen:address, console:address, 3:address:programming-environment-data
  ]
  99 run: event-loop screen:address, console:address, 3:address:programming-environment-data
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: console:address <- next-ingredient 
 100 run: env:address:programming-environment-data <- next-ingredient 
 100 run: recipes:address:editor-data <- get *env, recipes:offset
 100 run: current-sandbox:address:editor-data <- get *env, current-sandbox:offset
 100 run: sandbox-in-focus?:address:boolean <- get-address *env, sandbox-in-focus?:offset
 100 run: render-all-on-no-more-events?:boolean <- copy 0/false
 100 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
 100 run: loop-unless found?, 
 100 run: break-if quit?, 
 100 run: trace 10, [app], [next-event]
  10 app: next-event 
 100 run: maximized?:address:boolean <- get-address *env, maximized?:offset
 100 run: break-unless *maximized?, 
 100 run: k:address:number <- maybe-convert e:event, keycode:variant
 100 run: break-unless k, 
 100 run: c:address:character <- maybe-convert e:event, text:variant
 100 run: break-unless c, 
 100 run: t:address:touch-event <- maybe-convert e:event, touch:variant
 100 run: break-unless t, 
 100 run: touch-type:number <- get *t, type:offset
 100 run: is-left-click?:boolean <- equal touch-type, 65513/mouse-left
 100 run: loop-unless is-left-click?, +next-event:label
 100 run: sandbox-left-margin:number <- get *current-sandbox, left:offset
 100 run: click-column:number <- get *t, column:offset
 100 run: on-sandbox-side?:boolean <- greater-or-equal click-column, sandbox-left-margin
 100 run: break-unless on-sandbox-side?, 
 100 run: first-sandbox:address:sandbox-data <- get *env, sandbox:offset
 100 run: break-unless first-sandbox, 
 100 run: first-sandbox-begins:number <- get *first-sandbox, starting-row-on-screen:offset
 100 run: click-row:number <- get *t, row:offset
 100 run: below-sandbox-editor?:boolean <- greater-or-equal click-row, first-sandbox-begins
 100 run: break-unless below-sandbox-editor?, 
 100 run: sandbox:address:sandbox-data <- find-click-in-sandbox-code env, click-row
 100 run: break-unless sandbox, 
 100 run: sandbox-left-margin:number <- get *current-sandbox, left:offset
 100 run: click-column:number <- get *t, column:offset
 100 run: on-sandbox-side?:boolean <- greater-or-equal click-column, sandbox-left-margin
 100 run: break-unless on-sandbox-side?, 
 100 run: first-sandbox:address:sandbox-data <- get *env, sandbox:offset
 100 run: break-unless first-sandbox, 
 100 run: first-sandbox-begins:number <- get *first-sandbox, starting-row-on-screen:offset
 100 run: click-row:number <- get *t, row:offset
 100 run: below-sandbox-editor?:boolean <- greater-or-equal click-row, first-sandbox-begins
 100 run: break-unless below-sandbox-editor?, 
 100 run: sandbox:address:sandbox-data <- find-click-in-sandbox-output env, click-row
 100 run: break-unless sandbox, 
 100 run: sandbox <- toggle-expected-response sandbox
 100 run: save-sandboxes env
 100 run: hide-screen screen
 100 run: screen <- render-sandbox-side screen, env, 1/clear
  11 app: render sandbox side 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 120 
  90 print-character: 102 
  90 print-character: 111 
  90 print-character: 111 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  99 string-equal: comparing lengths 
  99 string-equal: comparing characters 
  90 print-character: 52 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 9473 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: screen <- update-cursor screen, recipes, current-sandbox, *sandbox-in-focus?
 100 run: show-screen screen
 100 run: loop +next-event:label
 100 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
 100 run: loop-unless found?, 
 100 run: break-if quit?, 
  98 run: screen-should-contain-in-color 2/green, [
    .                                        .
    .                                        .
    .                                        .
    .                                        .
    .                                        .
    .                     4                  .
    .                                        .
    .                                        .
  ]
  98 run: run [
    print-character screen:address, 9251/␣/cursor
  ]
  98 run: print-character screen:address, 9251/␣/cursor
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: color <- copy 7/white
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9251 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  97 run: screen-should-contain [
    .                     run (F4)           .
    .␣                   ┊                   .
    .recipe foo [        ┊━━━━━━━━━━━━━━━━━━━.
    .  add 2, 2          ┊                  x.
    .]                   ┊foo                .
    .┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┊4                  .
    .                    ┊━━━━━━━━━━━━━━━━━━━.
    .                    ┊                   .
  ]
  97 run: assume-console [
    left-click 3, 11  # cursor to end of line
    press backspace
    type [3]
    press F4
  ]
  97 run: run [
    event-loop screen:address, console:address, 3:address:programming-environment-data
  ]
  97 run: event-loop screen:address, console:address, 3:address:programming-environment-data
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: console:address <- next-ingredient 
  98 run: env:address:programming-environment-data <- next-ingredient 
  98 run: recipes:address:editor-data <- get *env, recipes:offset
  98 run: current-sandbox:address:editor-data <- get *env, current-sandbox:offset
  98 run: sandbox-in-focus?:address:boolean <- get-address *env, sandbox-in-focus?:offset
  98 run: render-all-on-no-more-events?:boolean <- copy 0/false
  98 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: x:address:console <- next-ingredient 
  99 run: break-unless x, 
  99 run: idx:address:number <- get-address *x, index:offset
  99 run: buf:address:array:event <- get *x, data:offset
  99 run: max:number <- length *buf
  99 run: done?:boolean <- greater-or-equal *idx, max
  99 run: break-unless done?, 
  99 run: result:event <- index *buf, *idx
  99 run: *idx <- add *idx, 1
  99 run: reply result, x/same-as-ingredient:0, 1/found, 0/quit
  98 run: loop-unless found?, 
  98 run: break-if quit?, 
  98 run: trace 10, [app], [next-event]
  10 app: next-event 
  98 run: maximized?:address:boolean <- get-address *env, maximized?:offset
  98 run: break-unless *maximized?, 
  98 run: k:address:number <- maybe-convert e:event, keycode:variant
  98 run: break-unless k, 
  98 run: c:address:character <- maybe-convert e:event, text:variant
  98 run: break-unless c, 
  98 run: t:address:touch-event <- maybe-convert e:event, touch:variant
  98 run: break-unless t, 
  98 run: touch-type:number <- get *t, type:offset
  98 run: is-left-click?:boolean <- equal touch-type, 65513/mouse-left
  98 run: loop-unless is-left-click?, +next-event:label
  98 run: sandbox-left-margin:number <- get *current-sandbox, left:offset
  98 run: click-column:number <- get *t, column:offset
  98 run: on-sandbox-side?:boolean <- greater-or-equal click-column, sandbox-left-margin
  98 run: break-unless on-sandbox-side?, 
  98 run: sandbox-left-margin:number <- get *current-sandbox, left:offset
  98 run: click-column:number <- get *t, column:offset
  98 run: on-sandbox-side?:boolean <- greater-or-equal click-column, sandbox-left-margin
  98 run: break-unless on-sandbox-side?, 
  98 run: was-delete?:boolean <- delete-sandbox *t, env
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: t:touch-event <- next-ingredient 
  99 run: env:address:programming-environment-data <- next-ingredient 
  99 run: click-column:number <- get t, column:offset
  99 run: current-sandbox:address:editor-data <- get *env, current-sandbox:offset
  99 run: right:number <- get *current-sandbox, right:offset
  99 run: at-right?:boolean <- equal click-column, right
  99 run: jump-if at-right?, 1:offset
  99 run: reply 0/false
  98 run: break-unless was-delete?, 
  98 run: sandbox-left-margin:number <- get *current-sandbox, left:offset
  98 run: click-column:number <- get *t, column:offset
  98 run: on-sandbox-side?:boolean <- greater-or-equal click-column, sandbox-left-margin
  98 run: break-unless on-sandbox-side?, 
  98 run: _ <- move-cursor-in-editor screen, recipes, *t
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: editor:address:editor-data <- next-ingredient 
  99 run: t:touch-event <- next-ingredient 
  99 run: jump-if editor, 1:offset
  99 run: click-row:number <- get t, row:offset
  99 run: jump-if click-row, 1:offset
  99 run: click-column:number <- get t, column:offset
  99 run: left:number <- get *editor, left:offset
  99 run: too-far-left?:boolean <- lesser-than click-column, left
  99 run: jump-unless too-far-left?, 1:offset
  99 run: right:number <- get *editor, right:offset
  99 run: too-far-right?:boolean <- greater-than click-column, right
  99 run: jump-unless too-far-right?, 1:offset
  99 run: before-cursor-row:number <- get *editor, cursor-row:offset
  99 run: before-cursor-column:number <- get *editor, cursor-column:offset
  99 run: before-top-of-screen:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: editor <- snap-cursor screen, editor, click-row, click-column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: editor:address:editor-data <- next-ingredient 
 100 run: target-row:number <- next-ingredient 
 100 run: target-column:number <- next-ingredient 
 100 run: jump-if editor, 1:offset
 100 run: left:number <- get *editor, left:offset
 100 run: right:number <- get *editor, right:offset
 100 run: screen-height:number <- screen-height screen
 100 run: curr:address:duplex-list <- get *editor, top-of-screen:offset
 100 run: prev:address:duplex-list <- copy curr
 100 run: curr <- next-duplex curr
 100 run: row:number <- copy 1/top
 100 run: column:number <- copy left
 100 run: cursor-row:address:number <- get-address *editor, cursor-row:offset
 100 run: *cursor-row <- copy target-row
 100 run: cursor-column:address:number <- get-address *editor, cursor-column:offset
 100 run: *cursor-column <- copy target-column
 100 run: before-cursor:address:address:duplex-list <- get-address *editor, before-cursor:offset
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: row <- add row, 1
 100 run: column <- copy left
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: loop +next-character:label
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: row <- add row, 1
 100 run: column <- copy left
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: loop +next-character:label
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: at-cursor?:boolean <- equal column, *cursor-column
 100 run: break-unless at-cursor?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: left-of-cursor?:boolean <- lesser-than column, *cursor-column
 100 run: break-unless left-of-cursor?, 
 100 run: *cursor-column <- copy column
 100 run: *before-cursor <- copy prev
 100 run: row <- add row, 1
 100 run: column <- copy left
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: loop +next-character:label
 100 run: break-unless curr, 
 100 run: off-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if off-screen?, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: break-unless at-cursor-row?, 
 100 run: c:character <- get *curr, value:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: curr <- next-duplex curr
 100 run: prev <- next-duplex prev
 100 run: column <- add column, 1
 100 run: loop 
 100 run: break-unless curr, 
 100 run: at-cursor-row?:boolean <- equal row, *cursor-row
 100 run: cursor-outside-line?:boolean <- lesser-or-equal column, *cursor-column
 100 run: before-cursor-on-same-line?:boolean <- and at-cursor-row?, cursor-outside-line?
 100 run: above-cursor-row?:boolean <- lesser-than row, *cursor-row
 100 run: before-cursor?:boolean <- or before-cursor-on-same-line?, above-cursor-row?
 100 run: break-unless before-cursor?, 
 100 run: reply editor/same-as-ingredient:1
  99 run: undo-coalesce-tag:number <- copy 0/never
  99 run: after-cursor-row:number <- get *editor, cursor-row:offset
  99 run: after-cursor-column:number <- get *editor, cursor-column:offset
  99 run: after-top-of-screen:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: break-unless undo-coalesce-tag, 
  99 run: op:address:operation <- new operation:type
  99 run: *op <- merge 1/move-operation, before-cursor-row, before-cursor-column, before-top-of-screen, after-cursor-row, after-cursor-column, after-top-of-screen, undo-coalesce-tag
  99 run: editor <- add-operation editor, op
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: editor:address:editor-data <- next-ingredient 
 100 run: op:address:operation <- next-ingredient 
 100 run: undo:address:address:list:address:operation <- get-address *editor, undo:offset
 100 run: *undo/skiptypecheck <- push op, *undo
 100 run: redo:address:address:list:address:operation <- get-address *editor, redo:offset
 100 run: *redo <- copy 0
 100 run: reply editor/same-as-ingredient:0
  99 run: reply 1/true
  98 run: *sandbox-in-focus? <- move-cursor-in-editor screen, current-sandbox, *t
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: editor:address:editor-data <- next-ingredient 
  99 run: t:touch-event <- next-ingredient 
  99 run: jump-if editor, 1:offset
  99 run: click-row:number <- get t, row:offset
  99 run: jump-if click-row, 1:offset
  99 run: click-column:number <- get t, column:offset
  99 run: left:number <- get *editor, left:offset
  99 run: too-far-left?:boolean <- lesser-than click-column, left
  99 run: jump-unless too-far-left?, 1:offset
  99 run: reply 0/false
  98 run: screen <- update-cursor screen, recipes, current-sandbox, *sandbox-in-focus?
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: recipes:address:editor-data <- next-ingredient 
  99 run: current-sandbox:address:editor-data <- next-ingredient 
  99 run: sandbox-in-focus?:boolean <- next-ingredient 
  99 run: break-if sandbox-in-focus?, 
  99 run: cursor-row:number <- get *recipes, cursor-row:offset
  99 run: cursor-column:number <- get *recipes, cursor-column:offset
  99 run: break-unless sandbox-in-focus?, 
  99 run: screen <- move-cursor screen, cursor-row, cursor-column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: reply screen/same-as-ingredient:0
  98 run: loop +next-event:label
  98 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: x:address:console <- next-ingredient 
  99 run: break-unless x, 
  99 run: idx:address:number <- get-address *x, index:offset
  99 run: buf:address:array:event <- get *x, data:offset
  99 run: max:number <- length *buf
  99 run: done?:boolean <- greater-or-equal *idx, max
  99 run: break-unless done?, 
  99 run: result:event <- index *buf, *idx
  99 run: *idx <- add *idx, 1
  99 run: reply result, x/same-as-ingredient:0, 1/found, 0/quit
  98 run: loop-unless found?, 
  98 run: break-if quit?, 
  98 run: trace 10, [app], [next-event]
  10 app: next-event 
  98 run: maximized?:address:boolean <- get-address *env, maximized?:offset
  98 run: break-unless *maximized?, 
  98 run: k:address:number <- maybe-convert e:event, keycode:variant
  98 run: break-unless k, 
  98 run: c:address:character <- maybe-convert e:event, text:variant
  98 run: break-unless c, 
  98 run: maximize?:boolean <- equal *c, 24/ctrl-x
  98 run: break-unless maximize?, 
  98 run: switch-side?:boolean <- equal *c, 14/ctrl-n
  98 run: break-unless switch-side?, 
  98 run: redraw-screen?:boolean <- equal *c, 12/ctrl-l
  98 run: break-unless redraw-screen?, 
  98 run: t:address:touch-event <- maybe-convert e:event, touch:variant
  98 run: break-unless t, 
  98 run: r:address:resize-event <- maybe-convert e:event, resize:variant
  98 run: break-unless r, 
  98 run: hide-screen screen
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: break-unless screen, 
  99 run: reply screen
  98 run: break-if *sandbox-in-focus?, 
  98 run: screen, recipes, render?:boolean <- handle-keyboard-event screen, recipes, e:event
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: editor:address:editor-data <- next-ingredient 
  99 run: e:event <- next-ingredient 
  99 run: jump-if editor, 1:offset
  99 run: screen-width:number <- screen-width screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: reply width
  99 run: screen-height:number <- screen-height screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: height:number <- get *sc, num-rows:offset
 100 run: reply height
  99 run: left:number <- get *editor, left:offset
  99 run: right:number <- get *editor, right:offset
  99 run: before-cursor:address:address:duplex-list <- get-address *editor, before-cursor:offset
  99 run: cursor-row:address:number <- get-address *editor, cursor-row:offset
  99 run: cursor-column:address:number <- get-address *editor, cursor-column:offset
  99 run: save-row:number <- copy *cursor-row
  99 run: save-column:number <- copy *cursor-column
  99 run: c:address:character <- maybe-convert e, text:variant
  99 run: break-unless c, 
  99 run: trace 10, [app], [handle-keyboard-event: special character]
  10 app: handle-keyboard-event: special character 
  99 run: redo?:boolean <- equal *c, 25/ctrl-y
  99 run: break-unless redo?, 
  99 run: undo?:boolean <- equal *c, 26/ctrl-z
  99 run: break-unless undo?, 
  99 run: page-up?:boolean <- equal *c, 2/ctrl-b
  99 run: break-unless page-up?, 
  99 run: page-down?:boolean <- equal *c, 6/ctrl-f
  99 run: break-unless page-down?, 
  99 run: delete-to-end-of-line?:boolean <- equal *c, 11/ctrl-k
  99 run: break-unless delete-to-end-of-line?, 
  99 run: delete-to-start-of-line?:boolean <- equal *c, 21/ctrl-u
  99 run: break-unless delete-to-start-of-line?, 
  99 run: move-to-end-of-line?:boolean <- equal *c, 5/ctrl-e
  99 run: break-unless move-to-end-of-line?, 
  99 run: move-to-start-of-line?:boolean <- equal *c, 1/ctrl-a
  99 run: break-unless move-to-start-of-line?, 
  99 run: delete-previous-character?:boolean <- equal *c, 8/backspace
  99 run: break-unless delete-previous-character?, 
  99 run: top-before:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: editor, screen, go-render?:boolean, backspaced-cell:address:duplex-list <- delete-before-cursor editor, screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: editor:address:editor-data <- next-ingredient 
 100 run: screen:address <- next-ingredient 
 100 run: before-cursor:address:address:duplex-list <- get-address *editor, before-cursor:offset
 100 run: prev:address:duplex-list <- prev-duplex *before-cursor
 100 run: jump-if prev, 1:offset
 100 run: trace 10, [app], [delete-before-cursor]
  10 app: delete-before-cursor 
 100 run: original-row:number <- get *editor, cursor-row:offset
 100 run: editor, scroll?:boolean <- move-cursor-coordinates-left editor
  10 app: decrementing cursor column 
 100 run: backspaced-cell:address:duplex-list <- copy *before-cursor
 100 run: remove-duplex *before-cursor
 100 run: *before-cursor <- copy prev
 100 run: jump-unless scroll?, 1:offset
 100 run: screen-width:number <- screen-width screen
 100 run: cursor-row:number <- get *editor, cursor-row:offset
 100 run: cursor-column:number <- get *editor, cursor-column:offset
 100 run: same-row?:boolean <- equal cursor-row, original-row
 100 run: jump-if same-row?, 1:offset
 100 run: left:number <- get *editor, left:offset
 100 run: right:number <- get *editor, right:offset
 100 run: curr:address:duplex-list <- next-duplex *before-cursor
 100 run: screen <- move-cursor screen, cursor-row, cursor-column
 100 run: curr-column:number <- copy cursor-column
 100 run: at-right?:boolean <- greater-or-equal curr-column, screen-width
 100 run: jump-unless at-right?, 1:offset
 100 run: break-unless curr, 
 100 run: currc:character <- get *curr, value:offset
 100 run: at-newline?:boolean <- equal currc, 10/newline
 100 run: break-if at-newline?, 
 100 run: screen <- print-character screen, 32/space
  90 print-character: 32 
 100 run: reply editor/same-as-ingredient:0, screen/same-as-ingredient:1, 0/no-more-render, backspaced-cell
  99 run: break-unless backspaced-cell, 
  99 run: top-after:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: undo:address:address:list <- get-address *editor, undo:offset
  99 run: break-unless *undo, 
  99 run: op:address:operation/skiptypecheck <- first *undo
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:list <- next-ingredient 
 100 run: result:location <- get *in, value:offset
 100 run: reply result
  99 run: deletion:address:delete-operation <- maybe-convert *op, delete:variant
  99 run: break-unless deletion, 
  99 run: op:address:operation <- new operation:type
  99 run: deleted-until:address:duplex-list <- next-duplex *before-cursor
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: *op <- merge 2/delete-operation, save-row/before, save-column/before, top-before, *cursor-row/after, *cursor-column/after, top-after, backspaced-cell/deleted, *before-cursor/delete-from, deleted-until, 1/coalesce-backspace
  99 run: editor <- add-operation editor, op
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: editor:address:editor-data <- next-ingredient 
 100 run: op:address:operation <- next-ingredient 
 100 run: undo:address:address:list:address:operation <- get-address *editor, undo:offset
 100 run: *undo/skiptypecheck <- push op, *undo
 100 run: redo:address:address:list:address:operation <- get-address *editor, redo:offset
 100 run: *redo <- copy 0
 100 run: reply editor/same-as-ingredient:0
  99 run: reply screen/same-as-ingredient:0, editor/same-as-ingredient:1, go-render?
  98 run: more-events?:boolean <- has-more-events? console
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: console:address <- next-ingredient 
  99 run: break-unless console, 
  99 run: reply 0/false
  98 run: break-unless more-events?, 
  98 run: break-if more-events?, 
  98 run: break-unless render-all-on-no-more-events?, 
  98 run: break-unless render?, 
  98 run: break-unless *sandbox-in-focus?, 
  98 run: screen <- update-cursor screen, recipes, current-sandbox, *sandbox-in-focus?
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: recipes:address:editor-data <- next-ingredient 
  99 run: current-sandbox:address:editor-data <- next-ingredient 
  99 run: sandbox-in-focus?:boolean <- next-ingredient 
  99 run: break-if sandbox-in-focus?, 
  99 run: cursor-row:number <- get *recipes, cursor-row:offset
  99 run: cursor-column:number <- get *recipes, cursor-column:offset
  99 run: break-unless sandbox-in-focus?, 
  99 run: screen <- move-cursor screen, cursor-row, cursor-column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: reply screen/same-as-ingredient:0
  98 run: show-screen screen
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: break-unless screen, 
  99 run: reply screen
  98 run: loop 
  98 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: x:address:console <- next-ingredient 
  99 run: break-unless x, 
  99 run: idx:address:number <- get-address *x, index:offset
  99 run: buf:address:array:event <- get *x, data:offset
  99 run: max:number <- length *buf
  99 run: done?:boolean <- greater-or-equal *idx, max
  99 run: break-unless done?, 
  99 run: result:event <- index *buf, *idx
  99 run: *idx <- add *idx, 1
  99 run: reply result, x/same-as-ingredient:0, 1/found, 0/quit
  98 run: loop-unless found?, 
  98 run: break-if quit?, 
  98 run: trace 10, [app], [next-event]
  10 app: next-event 
  98 run: maximized?:address:boolean <- get-address *env, maximized?:offset
  98 run: break-unless *maximized?, 
  98 run: k:address:number <- maybe-convert e:event, keycode:variant
  98 run: break-unless k, 
  98 run: c:address:character <- maybe-convert e:event, text:variant
  98 run: break-unless c, 
  98 run: maximize?:boolean <- equal *c, 24/ctrl-x
  98 run: break-unless maximize?, 
  98 run: switch-side?:boolean <- equal *c, 14/ctrl-n
  98 run: break-unless switch-side?, 
  98 run: redraw-screen?:boolean <- equal *c, 12/ctrl-l
  98 run: break-unless redraw-screen?, 
  98 run: t:address:touch-event <- maybe-convert e:event, touch:variant
  98 run: break-unless t, 
  98 run: r:address:resize-event <- maybe-convert e:event, resize:variant
  98 run: break-unless r, 
  98 run: hide-screen screen
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: break-unless screen, 
  99 run: reply screen
  98 run: break-if *sandbox-in-focus?, 
  98 run: screen, recipes, render?:boolean <- handle-keyboard-event screen, recipes, e:event
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: editor:address:editor-data <- next-ingredient 
  99 run: e:event <- next-ingredient 
  99 run: jump-if editor, 1:offset
  99 run: screen-width:number <- screen-width screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: reply width
  99 run: screen-height:number <- screen-height screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: height:number <- get *sc, num-rows:offset
 100 run: reply height
  99 run: left:number <- get *editor, left:offset
  99 run: right:number <- get *editor, right:offset
  99 run: before-cursor:address:address:duplex-list <- get-address *editor, before-cursor:offset
  99 run: cursor-row:address:number <- get-address *editor, cursor-row:offset
  99 run: cursor-column:address:number <- get-address *editor, cursor-column:offset
  99 run: save-row:number <- copy *cursor-row
  99 run: save-column:number <- copy *cursor-column
  99 run: c:address:character <- maybe-convert e, text:variant
  99 run: break-unless c, 
  99 run: trace 10, [app], [handle-keyboard-event: special character]
  10 app: handle-keyboard-event: special character 
  99 run: redo?:boolean <- equal *c, 25/ctrl-y
  99 run: break-unless redo?, 
  99 run: undo?:boolean <- equal *c, 26/ctrl-z
  99 run: break-unless undo?, 
  99 run: page-up?:boolean <- equal *c, 2/ctrl-b
  99 run: break-unless page-up?, 
  99 run: page-down?:boolean <- equal *c, 6/ctrl-f
  99 run: break-unless page-down?, 
  99 run: delete-to-end-of-line?:boolean <- equal *c, 11/ctrl-k
  99 run: break-unless delete-to-end-of-line?, 
  99 run: delete-to-start-of-line?:boolean <- equal *c, 21/ctrl-u
  99 run: break-unless delete-to-start-of-line?, 
  99 run: move-to-end-of-line?:boolean <- equal *c, 5/ctrl-e
  99 run: break-unless move-to-end-of-line?, 
  99 run: move-to-start-of-line?:boolean <- equal *c, 1/ctrl-a
  99 run: break-unless move-to-start-of-line?, 
  99 run: delete-previous-character?:boolean <- equal *c, 8/backspace
  99 run: break-unless delete-previous-character?, 
  99 run: tab?:boolean <- equal *c, 9/tab
  99 run: break-unless tab?, 
  99 run: newline?:boolean <- equal *c, 10/newline
  99 run: break-unless newline?, 
  99 run: regular-character?:boolean <- greater-or-equal *c, 32/space
  99 run: jump-if regular-character?, 1:offset
  99 run: top-before:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: cursor-before:address:duplex-list <- copy *before-cursor
  99 run: editor, screen, go-render?:boolean <- insert-at-cursor editor, *c, screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: editor:address:editor-data <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: screen:address <- next-ingredient 
 100 run: before-cursor:address:address:duplex-list <- get-address *editor, before-cursor:offset
 100 run: insert-duplex c, *before-cursor
 100 run: *before-cursor <- next-duplex *before-cursor
 100 run: cursor-row:address:number <- get-address *editor, cursor-row:offset
 100 run: cursor-column:address:number <- get-address *editor, cursor-column:offset
 100 run: left:number <- get *editor, left:offset
 100 run: right:number <- get *editor, right:offset
 100 run: save-row:number <- copy *cursor-row
 100 run: save-column:number <- copy *cursor-column
 100 run: screen-width:number <- screen-width screen
 100 run: screen-height:number <- screen-height screen
 100 run: wrap-column:number <- subtract right, 1
 100 run: at-wrap?:boolean <- greater-or-equal *cursor-column, wrap-column
 100 run: break-unless at-wrap?, 
 100 run: *cursor-column <- add *cursor-column, 1
 100 run: next:address:duplex-list <- next-duplex *before-cursor
 100 run: at-end?:boolean <- equal next, 0/null
 100 run: break-unless at-end?, 
 100 run: break-unless next, 
 100 run: at-right?:boolean <- greater-or-equal *cursor-column, screen-width
 100 run: break-if at-right?, 
 100 run: curr:address:duplex-list <- copy *before-cursor
 100 run: move-cursor screen, save-row, save-column
 100 run: curr-column:number <- copy save-column
 100 run: at-right?:boolean <- greater-than curr-column, right
 100 run: jump-unless at-right?, 1:offset
 100 run: break-unless curr, 
 100 run: currc:character <- get *curr, value:offset
 100 run: at-newline?:boolean <- equal currc, 10/newline
 100 run: break-if at-newline?, 
 100 run: print-character screen, currc
  90 print-character: 51 
 100 run: curr-column <- add curr-column, 1
 100 run: curr <- next-duplex curr
 100 run: loop 
 100 run: at-right?:boolean <- greater-than curr-column, right
 100 run: jump-unless at-right?, 1:offset
 100 run: break-unless curr, 
 100 run: currc:character <- get *curr, value:offset
 100 run: at-newline?:boolean <- equal currc, 10/newline
 100 run: break-if at-newline?, 
 100 run: reply editor/same-as-ingredient:0, screen/same-as-ingredient:2, 0/no-more-render
  99 run: top-after:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: undo:address:address:list <- get-address *editor, undo:offset
  99 run: break-unless *undo, 
  99 run: op:address:operation/skiptypecheck <- first *undo
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:list <- next-ingredient 
 100 run: result:location <- get *in, value:offset
 100 run: reply result
  99 run: typing:address:insert-operation <- maybe-convert *op, typing:variant
  99 run: break-unless typing, 
  99 run: insert-from:address:duplex-list <- next-duplex cursor-before
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: insert-to:address:duplex-list <- next-duplex insert-from
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: op:address:operation <- new operation:type
  99 run: *op <- merge 0/insert-operation, save-row/before, save-column/before, top-before, *cursor-row/after, *cursor-column/after, top-after, insert-from, insert-to, 1/coalesce
  99 run: editor <- add-operation editor, op
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: editor:address:editor-data <- next-ingredient 
 100 run: op:address:operation <- next-ingredient 
 100 run: undo:address:address:list:address:operation <- get-address *editor, undo:offset
 100 run: *undo/skiptypecheck <- push op, *undo
 100 run: redo:address:address:list:address:operation <- get-address *editor, redo:offset
 100 run: *redo <- copy 0
 100 run: reply editor/same-as-ingredient:0
  99 run: reply screen/same-as-ingredient:0, editor/same-as-ingredient:1, go-render?
  98 run: more-events?:boolean <- has-more-events? console
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: console:address <- next-ingredient 
  99 run: break-unless console, 
  99 run: reply 0/false
  98 run: break-unless more-events?, 
  98 run: break-if more-events?, 
  98 run: break-unless render-all-on-no-more-events?, 
  98 run: break-unless render?, 
  98 run: break-unless *sandbox-in-focus?, 
  98 run: screen <- update-cursor screen, recipes, current-sandbox, *sandbox-in-focus?
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: recipes:address:editor-data <- next-ingredient 
  99 run: current-sandbox:address:editor-data <- next-ingredient 
  99 run: sandbox-in-focus?:boolean <- next-ingredient 
  99 run: break-if sandbox-in-focus?, 
  99 run: cursor-row:number <- get *recipes, cursor-row:offset
  99 run: cursor-column:number <- get *recipes, cursor-column:offset
  99 run: break-unless sandbox-in-focus?, 
  99 run: screen <- move-cursor screen, cursor-row, cursor-column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: reply screen/same-as-ingredient:0
  98 run: show-screen screen
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: break-unless screen, 
  99 run: reply screen
  98 run: loop 
  98 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: x:address:console <- next-ingredient 
  99 run: break-unless x, 
  99 run: idx:address:number <- get-address *x, index:offset
  99 run: buf:address:array:event <- get *x, data:offset
  99 run: max:number <- length *buf
  99 run: done?:boolean <- greater-or-equal *idx, max
  99 run: break-unless done?, 
  99 run: result:event <- index *buf, *idx
  99 run: *idx <- add *idx, 1
  99 run: reply result, x/same-as-ingredient:0, 1/found, 0/quit
  98 run: loop-unless found?, 
  98 run: break-if quit?, 
  98 run: trace 10, [app], [next-event]
  10 app: next-event 
  98 run: maximized?:address:boolean <- get-address *env, maximized?:offset
  98 run: break-unless *maximized?, 
  98 run: k:address:number <- maybe-convert e:event, keycode:variant
  98 run: break-unless k, 
  98 run: do-run?:boolean <- equal *k, 65532/F4
  98 run: break-unless do-run?, 
  98 run: status:address:array:character <- new [running...  ]
  98 run: screen <- update-status screen, status, 245/grey
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: msg:address:array:character <- next-ingredient 
  99 run: color:number <- next-ingredient 
  99 run: screen <- move-cursor screen, 0, 2
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: screen <- print-string screen, msg, color, 238/grey/background
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address:screen <- next-ingredient 
 100 run: s:address:array:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: len:number <- length *s
 100 run: i:number <- copy 0
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 114 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 117 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 110 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 110 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 105 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 110 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 103 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 46 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 46 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 46 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 32 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: print-character screen, c, color, bg-color
  90 print-character: 32 
 100 run: i <- add i, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: reply screen/same-as-ingredient:0
  99 run: reply screen/same-as-ingredient:0
  98 run: error?:boolean, env, screen <- run-sandboxes env, screen
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: env:address:programming-environment-data <- next-ingredient 
  99 run: screen:address <- next-ingredient 
  99 run: stop?:boolean, env, screen <- update-recipes env, screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: env:address:programming-environment-data <- next-ingredient 
 100 run: screen:address <- next-ingredient 
 100 run: recipes:address:editor-data <- get *env, recipes:offset
 100 run: in:address:array:character <- editor-contents recipes
 100 run: save [recipes.mu], in
 100 run: recipe-warnings:address:address:array:character <- get-address *env, recipe-warnings:offset
 100 run: *recipe-warnings <- reload in
 100 run: break-unless *recipe-warnings, 
 100 run: reply 0/no-errors-found, env/same-as-ingredient:0, screen/same-as-ingredient:1
  99 run: jump-unless stop?, 1:offset
  99 run: current-sandbox:address:editor-data <- get *env, current-sandbox:offset
  99 run: sandbox-contents:address:array:character <- editor-contents current-sandbox
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: editor:address:editor-data <- next-ingredient 
 100 run: buf:address:buffer <- new-buffer 80
 100 run: curr:address:duplex-list <- get *editor, data:offset
 100 run: assert curr, [editor without data is illegal; must have at least a sentinel]
 100 run: curr <- next-duplex curr
 100 run: jump-if curr, 1:offset
 100 run: reply 0
  99 run: break-unless sandbox-contents, 
  99 run: save-sandboxes env
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: env:address:programming-environment-data <- next-ingredient 
 100 run: current-sandbox:address:editor-data <- get *env, current-sandbox:offset
 100 run: $system [rm lesson/[0-9]* >/dev/null 2>/dev/null]
 100 run: curr:address:sandbox-data <- get *env, sandbox:offset
 100 run: suffix:address:array:character <- new [.out]
 100 run: idx:number <- copy 0
 100 run: break-unless curr, 
 100 run: data:address:array:character <- get *curr, data:offset
 100 run: filename:address:array:character <- integer-to-decimal-string idx
 100 run: save filename, data
 100 run: expected-response:address:array:character <- get *curr, expected-response:offset
 100 run: break-unless expected-response, 
 100 run: filename <- string-append filename, suffix
 100 run: save filename, expected-response
 100 run: idx <- add idx, 1
 100 run: curr <- get *curr, next-sandbox:offset
 100 run: loop 
 100 run: break-unless curr, 
  99 run: curr:address:sandbox-data <- get *env, sandbox:offset
  99 run: break-unless curr, 
  99 run: update-sandbox curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sandbox:address:sandbox-data <- next-ingredient 
 100 run: data:address:array:character <- get *sandbox, data:offset
 100 run: response:address:address:array:character <- get-address *sandbox, response:offset
 100 run: warnings:address:address:array:character <- get-address *sandbox, warnings:offset
 100 run: trace:address:address:array:character <- get-address *sandbox, trace:offset
 100 run: fake-screen:address:address:screen <- get-address *sandbox, screen:offset
 100 run: *response, *warnings, *fake-screen, *trace, completed?:boolean <- run-interactive data
  99 run: reply output, warnings, screen, stashes, completed?
  98 run: break-if *warnings, 
  98 run: break-if completed?:boolean, 
  97 run: curr <- get *curr, next-sandbox:offset
  97 run: loop 
  97 run: break-unless curr, 
  97 run: reply 0/no-errors-found, env/same-as-ingredient:0, screen/same-as-ingredient:1
  96 run: screen <- render-all screen, env
  97 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  97 run: screen:address <- next-ingredient 
  97 run: env:address:programming-environment-data <- next-ingredient 
  97 run: trace 10, [app], [render all]
  10 app: render all 
  97 run: hide-screen screen
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: break-unless screen, 
  98 run: reply screen
  97 run: trace 11, [app], [render top menu]
  11 app: render top menu 
  97 run: width:number <- screen-width screen
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: sc:address:screen <- next-ingredient 
  98 run: break-unless sc, 
  98 run: width:number <- get *sc, num-columns:offset
  98 run: reply width
  97 run: draw-horizontal screen, 0, 0/left, width, 32/space, 0/black, 238/grey
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: row:number <- next-ingredient 
  98 run: x:number <- next-ingredient 
  98 run: right:number <- next-ingredient 
  98 run: style:character, style-found?:boolean <- next-ingredient 
  98 run: break-if style-found?, 
  98 run: color:number, color-found?:boolean <- next-ingredient 
  98 run: break-if color-found?, 
  98 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  98 run: break-if bg-color-found?, 
  98 run: screen <- move-cursor screen, row, x
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  98 run: print-character screen, style, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: reply sc/same-as-ingredient:0
  98 run: x <- add x, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-or-equal x, right
  98 run: break-unless continue?, 
  97 run: button-start:number <- subtract width, 20
  97 run: button-on-screen?:boolean <- greater-or-equal button-start, 0
  97 run: assert button-on-screen?, [screen too narrow for menu]
  97 run: screen <- move-cursor screen, 0/row, button-start
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: sc:address:screen <- next-ingredient 
  98 run: new-row:number <- next-ingredient 
  98 run: new-column:number <- next-ingredient 
  98 run: break-unless sc, 
  98 run: row:address:number <- get-address *sc, cursor-row:offset
  98 run: *row <- copy new-row
  98 run: column:address:number <- get-address *sc, cursor-column:offset
  98 run: *column <- copy new-column
  98 run: reply sc/same-as-ingredient:0
  97 run: run-button:address:array:character <- new [ run (F4) ]
  97 run: print-string screen, run-button, 255/white, 161/reddish
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address:screen <- next-ingredient 
  98 run: s:address:array:character <- next-ingredient 
  98 run: color:number, color-found?:boolean <- next-ingredient 
  98 run: break-if color-found?, 
  98 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  98 run: break-if bg-color-found?, 
  98 run: len:number <- length *s
  98 run: i:number <- copy 0
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 114 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 117 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 110 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 40 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 70 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 52 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 41 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: reply screen/same-as-ingredient:0
  97 run: trace 11, [app], [render divider]
  11 app: render divider 
  97 run: divider:number, _ <- divide-with-remainder width, 2
  97 run: height:number <- screen-height screen
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: sc:address:screen <- next-ingredient 
  98 run: break-unless sc, 
  98 run: height:number <- get *sc, num-rows:offset
  98 run: reply height
  97 run: draw-vertical screen, divider, 1/top, height, 9482/vertical-dotted
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: col:number <- next-ingredient 
  98 run: y:number <- next-ingredient 
  98 run: bottom:number <- next-ingredient 
  98 run: style:character, style-found?:boolean <- next-ingredient 
  98 run: break-if style-found?, 
  98 run: color:number, color-found?:boolean <- next-ingredient 
  98 run: break-if color-found?, 
  98 run: color <- copy 245/grey
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  98 run: screen <- move-cursor screen, y, col
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: print-character screen, style, color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: trace 90, [print-character], c
  90 print-character: 9482 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: y <- add y, 1
  98 run: loop 
  98 run: continue?:boolean <- lesser-than y, bottom
  98 run: break-unless continue?, 
  97 run: screen <- render-recipes screen, env
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: env:address:programming-environment-data <- next-ingredient 
  98 run: trace 11, [app], [render recipes]
  11 app: render recipes 
  98 run: recipes:address:editor-data <- get *env, recipes:offset
  98 run: left:number <- get *recipes, left:offset
  98 run: right:number <- get *recipes, right:offset
  98 run: row:number, column:number, screen <- render screen, recipes
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: editor:address:editor-data <- next-ingredient 
  99 run: jump-if editor, 1:offset
  99 run: left:number <- get *editor, left:offset
  99 run: screen-height:number <- screen-height screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: height:number <- get *sc, num-rows:offset
 100 run: reply height
  99 run: right:number <- get *editor, right:offset
  99 run: curr:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: prev:address:duplex-list <- copy curr
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: color:number <- copy 7/white
  99 run: row:number <- copy 1/top
  99 run: column:number <- copy left
  99 run: cursor-row:address:number <- get-address *editor, cursor-row:offset
  99 run: cursor-column:address:number <- get-address *editor, cursor-column:offset
  99 run: before-cursor:address:address:duplex-list <- get-address *editor, before-cursor:offset
  99 run: screen <- move-cursor screen, row, column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: clear-line-delimited screen, column, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: row <- add row, 1
  99 run: column <- copy left
  99 run: screen <- move-cursor screen, row, column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: loop +next-character:label
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 114 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 101 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 99 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 105 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 112 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 101 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 102 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 111 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 111 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 91 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: clear-line-delimited screen, column, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: row <- add row, 1
  99 run: column <- copy left
  99 run: screen <- move-cursor screen, row, column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: loop +next-character:label
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 97 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 100 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 100 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 50 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 44 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 51 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: at-cursor?:boolean <- equal column, *cursor-column
  99 run: break-unless at-cursor?, 
  99 run: *before-cursor <- copy prev
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: left-of-cursor?:boolean <- lesser-than column, *cursor-column
  99 run: break-unless left-of-cursor?, 
  99 run: clear-line-delimited screen, column, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: row <- add row, 1
  99 run: column <- copy left
  99 run: screen <- move-cursor screen, row, column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: loop +next-character:label
  99 run: break-unless curr, 
  99 run: off-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if off-screen?, 
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: break-unless at-cursor-row?, 
  99 run: c:character <- get *curr, value:offset
  99 run: color <- get-color color, c
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: color:number <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color-is-white?:boolean <- equal color, 7/white
 100 run: break-unless color-is-white?, 
 100 run: starting-comment?:boolean <- equal c, 35/#
 100 run: break-unless starting-comment?, 
 100 run: color-is-blue?:boolean <- equal color, 12/lightblue
 100 run: break-unless color-is-blue?, 
 100 run: break-unless color-is-white?, 
 100 run: starting-assignment?:boolean <- equal c, 60/<
 100 run: break-unless starting-assignment?, 
 100 run: color-is-red?:boolean <- equal color, 1/red
 100 run: break-unless color-is-red?, 
 100 run: reply color
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: at-right?:boolean <- equal column, right
  99 run: break-unless at-right?, 
  99 run: print-character screen, c, color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 93 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: prev <- next-duplex prev
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: column <- add column, 1
  99 run: loop 
  99 run: break-unless curr, 
  99 run: bottom-of-screen:address:address:duplex-list <- get-address *editor, bottom-of-screen:offset
  99 run: *bottom-of-screen <- copy curr
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: cursor-outside-line?:boolean <- lesser-or-equal column, *cursor-column
  99 run: before-cursor-on-same-line?:boolean <- and at-cursor-row?, cursor-outside-line?
  99 run: above-cursor-row?:boolean <- lesser-than row, *cursor-row
  99 run: before-cursor?:boolean <- or before-cursor-on-same-line?, above-cursor-row?
  99 run: break-unless before-cursor?, 
  99 run: reply row, column, screen/same-as-ingredient:0, editor/same-as-ingredient:1
  98 run: clear-line-delimited screen, column, right
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: column:number <- next-ingredient 
  99 run: right:number <- next-ingredient 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  99 run: print-character screen, 32/space
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 7/white
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 32 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: column <- add column, 1
  99 run: loop 
  99 run: done?:boolean <- greater-than column, right
  99 run: break-if done?, 
  98 run: row <- add row, 1
  98 run: recipe-warnings:address:array:character <- get *env, recipe-warnings:offset
  98 run: break-unless recipe-warnings, 
  98 run: draw-horizontal screen, row, left, right, 9480/horizontal-dotted
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: row:number <- next-ingredient 
  99 run: x:number <- next-ingredient 
  99 run: right:number <- next-ingredient 
  99 run: style:character, style-found?:boolean <- next-ingredient 
  99 run: break-if style-found?, 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: color <- copy 245/grey
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: screen <- move-cursor screen, row, x
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9480 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  98 run: row <- add row, 1
  98 run: clear-screen-from screen, row, left, left, right
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: row:number <- next-ingredient 
  99 run: column:number <- next-ingredient 
  99 run: left:number <- next-ingredient 
  99 run: right:number <- next-ingredient 
  99 run: break-if screen, 
  99 run: screen <- move-cursor screen, row, column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: clear-line-delimited screen, column, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: clear-rest-of-screen screen, row, left, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: row:number <- next-ingredient 
 100 run: left:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: row <- add row, 1
 100 run: screen <- move-cursor screen, row, left
 100 run: screen-height:number <- screen-height screen
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
  99 run: reply screen/same-as-ingredient:0
  98 run: reply screen/same-as-ingredient:0
  97 run: screen <- render-sandbox-side screen, env
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: env:address:programming-environment-data <- next-ingredient 
  98 run: trace 11, [app], [render sandbox side]
  11 app: render sandbox side 
  98 run: current-sandbox:address:editor-data <- get *env, current-sandbox:offset
  98 run: left:number <- get *current-sandbox, left:offset
  98 run: right:number <- get *current-sandbox, right:offset
  98 run: row:number, column:number, screen, current-sandbox <- render screen, current-sandbox
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: editor:address:editor-data <- next-ingredient 
  99 run: jump-if editor, 1:offset
  99 run: left:number <- get *editor, left:offset
  99 run: screen-height:number <- screen-height screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: height:number <- get *sc, num-rows:offset
 100 run: reply height
  99 run: right:number <- get *editor, right:offset
  99 run: curr:address:duplex-list <- get *editor, top-of-screen:offset
  99 run: prev:address:duplex-list <- copy curr
  99 run: curr <- next-duplex curr
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: in:address:duplex-list <- next-ingredient 
 100 run: jump-if in, 1:offset
 100 run: result:address:duplex-list <- get *in, next:offset
 100 run: reply result
  99 run: color:number <- copy 7/white
  99 run: row:number <- copy 1/top
  99 run: column:number <- copy left
  99 run: cursor-row:address:number <- get-address *editor, cursor-row:offset
  99 run: cursor-column:address:number <- get-address *editor, cursor-column:offset
  99 run: before-cursor:address:address:duplex-list <- get-address *editor, before-cursor:offset
  99 run: screen <- move-cursor screen, row, column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: break-unless curr, 
  99 run: bottom-of-screen:address:address:duplex-list <- get-address *editor, bottom-of-screen:offset
  99 run: *bottom-of-screen <- copy curr
  99 run: at-cursor-row?:boolean <- equal row, *cursor-row
  99 run: cursor-outside-line?:boolean <- lesser-or-equal column, *cursor-column
  99 run: before-cursor-on-same-line?:boolean <- and at-cursor-row?, cursor-outside-line?
  99 run: above-cursor-row?:boolean <- lesser-than row, *cursor-row
  99 run: before-cursor?:boolean <- or before-cursor-on-same-line?, above-cursor-row?
  99 run: break-unless before-cursor?, 
  99 run: *cursor-row <- copy row
  99 run: *cursor-column <- copy column
  99 run: *before-cursor <- copy prev
  99 run: reply row, column, screen/same-as-ingredient:0, editor/same-as-ingredient:1
  98 run: clear-screen-from screen, row, column, left, right
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: row:number <- next-ingredient 
  99 run: column:number <- next-ingredient 
  99 run: left:number <- next-ingredient 
  99 run: right:number <- next-ingredient 
  99 run: break-if screen, 
  99 run: screen <- move-cursor screen, row, column
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: clear-line-delimited screen, column, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: clear-rest-of-screen screen, row, left, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: row:number <- next-ingredient 
 100 run: left:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: row <- add row, 1
 100 run: screen <- move-cursor screen, row, left
 100 run: screen-height:number <- screen-height screen
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
 100 run: screen <- move-cursor screen, row, left
 100 run: clear-line-delimited screen, left, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: row <- add row, 1
 100 run: loop 
 100 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
 100 run: break-if at-bottom-of-screen?, 
  99 run: reply screen/same-as-ingredient:0
  98 run: row <- add row, 1
  98 run: draw-horizontal screen, row, left, right, 9473/horizontal-double
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: row:number <- next-ingredient 
  99 run: x:number <- next-ingredient 
  99 run: right:number <- next-ingredient 
  99 run: style:character, style-found?:boolean <- next-ingredient 
  99 run: break-if style-found?, 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: color <- copy 245/grey
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: bg-color <- copy 0/black
  99 run: screen <- move-cursor screen, row, x
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: *column <- add *column, 1
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  99 run: print-character screen, style, color, bg-color
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: trace 90, [print-character], c
  90 print-character: 9473 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: reply sc/same-as-ingredient:0
  99 run: x <- add x, 1
  99 run: loop 
  99 run: continue?:boolean <- lesser-or-equal x, right
  99 run: break-unless continue?, 
  98 run: sandbox:address:sandbox-data <- get *env, sandbox:offset
  98 run: row, screen <- render-sandboxes screen, sandbox, left, right, row
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: sandbox:address:sandbox-data <- next-ingredient 
  99 run: left:number <- next-ingredient 
  99 run: right:number <- next-ingredient 
  99 run: row:number <- next-ingredient 
  99 run: jump-if sandbox, 1:offset
  99 run: screen-height:number <- screen-height screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: height:number <- get *sc, num-rows:offset
 100 run: reply height
  99 run: at-bottom?:boolean <- greater-or-equal row, screen-height
  99 run: jump-unless at-bottom?:boolean, 1:offset
  99 run: row <- add row, 1
  99 run: screen <- move-cursor screen, row, left
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: clear-line-delimited screen, left, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: print-character screen, 120/x, 245/grey
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: c:character <- next-ingredient 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: trace 90, [print-character], c
  90 print-character: 120 
 100 run: break-unless sc, 
 100 run: width:number <- get *sc, num-columns:offset
 100 run: height:number <- get *sc, num-rows:offset
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: legal?:boolean <- greater-or-equal *row, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *row, height
 100 run: jump-if legal?, 1:offset
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: legal? <- greater-or-equal *column, 0
 100 run: jump-if legal?, 1:offset
 100 run: legal? <- lesser-than *column, width
 100 run: jump-if legal?, 1:offset
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: index:number <- multiply *row, width
 100 run: index <- add index, *column
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: len:number <- length *buf
 100 run: backspace?:boolean <- equal c, 8
 100 run: break-unless backspace?, 
 100 run: cursor:address:screen-cell <- index-address *buf, index
 100 run: cursor-contents:address:character <- get-address *cursor, contents:offset
 100 run: *cursor-contents <- copy c
 100 run: cursor-color:address:number <- get-address *cursor, color:offset
 100 run: *cursor-color <- copy color
 100 run: right:number <- subtract width, 1
 100 run: at-right?:boolean <- greater-or-equal *column, right
 100 run: break-if at-right?, 
 100 run: reply sc/same-as-ingredient:0
  99 run: starting-row:address:number <- get-address *sandbox, starting-row-on-screen:offset
  99 run: *starting-row <- copy row
  99 run: row <- add row, 1
  99 run: screen <- move-cursor screen, row, left
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: sandbox-data:address:array:character <- get *sandbox, data:offset
  99 run: row, screen <- render-code-string screen, sandbox-data, left, right, row
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: s:address:array:character <- next-ingredient 
 100 run: left:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: row:number <- next-ingredient 
 100 run: jump-if s, 1:offset
 100 run: color:number <- copy 7/white
 100 run: column:number <- copy left
 100 run: screen <- move-cursor screen, row, column
 100 run: screen-height:number <- screen-height screen
 100 run: i:number <- copy 0
 100 run: len:number <- length *s
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: done? <- greater-or-equal row, screen-height
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: color <- get-color color, c
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: i <- add i, 1
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: print-character screen, c, color
  90 print-character: 102 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: done? <- greater-or-equal row, screen-height
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: color <- get-color color, c
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: i <- add i, 1
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: print-character screen, c, color
  90 print-character: 111 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: done? <- greater-or-equal row, screen-height
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: color <- get-color color, c
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: i <- add i, 1
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: print-character screen, c, color
  90 print-character: 111 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: was-at-left?:boolean <- equal column, left
 100 run: clear-line-delimited screen, column, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: break-if was-at-left?, 
 100 run: row <- add row, 1
 100 run: move-cursor screen, row, left
 100 run: reply row/same-as-ingredient:4, screen/same-as-ingredient:0
  99 run: code-ending-row:address:number <- get-address *sandbox, code-ending-row-on-screen:offset
  99 run: *code-ending-row <- copy row
  99 run: response-starting-row:address:number <- get-address *sandbox, response-starting-row-on-screen:offset
  99 run: sandbox-response:address:array:character <- get *sandbox, response:offset
  99 run: display-trace?:boolean <- get *sandbox, display-trace?:offset
  99 run: break-unless display-trace?, 
  99 run: sandbox-warnings:address:array:character <- get *sandbox, warnings:offset
  99 run: break-unless sandbox-warnings, 
  99 run: sandbox-screen:address <- get *sandbox, screen:offset
  99 run: empty-screen?:boolean <- fake-screen-is-empty? sandbox-screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: jump-if sc, 1:offset
 100 run: buf:address:array:screen-cell <- get *sc, data:offset
 100 run: i:number <- copy 0
 100 run: len:number <- length *buf
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: curr:screen-cell <- index *buf, i
 100 run: curr-contents:character <- get curr, contents:offset
 100 run: i <- add i, 1
 100 run: loop-unless curr-contents, 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: reply 1/true
  99 run: break-if empty-screen?, 
  99 run: break-unless empty-screen?, 
  99 run: *response-starting-row <- copy row
  99 run: break-unless sandbox-response, 
  99 run: expected-response:address:array:character <- get *sandbox, expected-response:offset
  99 run: break-unless expected-response, 
  99 run: response-is-expected?:boolean <- string-equal expected-response, sandbox-response
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: a:address:array:character <- next-ingredient 
 100 run: a-len:number <- length *a
 100 run: b:address:array:character <- next-ingredient 
 100 run: b-len:number <- length *b
 100 run: trace 99, [string-equal], [comparing lengths]
  99 string-equal: comparing lengths 
 100 run: length-equal?:boolean <- equal a-len, b-len
 100 run: break-if length-equal?, 
 100 run: trace 99, [string-equal], [comparing characters]
  99 string-equal: comparing characters 
 100 run: i:number <- copy 0
 100 run: done?:boolean <- greater-or-equal i, a-len
 100 run: break-if done?, 
 100 run: a2:character <- index *a, i
 100 run: b2:character <- index *b, i
 100 run: chars-match?:boolean <- equal a2, b2
 100 run: break-if chars-match?, 
 100 run: reply 0
  99 run: break-if response-is-expected?:boolean, 
  99 run: row, screen <- render-string screen, sandbox-response, left, right, 1/red, row
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: s:address:array:character <- next-ingredient 
 100 run: left:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: color:number <- next-ingredient 
 100 run: row:number <- next-ingredient 
 100 run: jump-if s, 1:offset
 100 run: column:number <- copy left
 100 run: screen <- move-cursor screen, row, column
 100 run: screen-height:number <- screen-height screen
 100 run: i:number <- copy 0
 100 run: len:number <- length *s
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: done? <- greater-or-equal row, screen-height
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: i <- add i, 1
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: print-character screen, c, color
  90 print-character: 53 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: done? <- greater-or-equal row, screen-height
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: i <- add i, 1
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: print-character screen, c, color
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: done? <- greater-or-equal row, screen-height
 100 run: break-if done?, 
 100 run: c:character <- index *s, i
 100 run: at-right?:boolean <- equal column, right
 100 run: break-unless at-right?, 
 100 run: i <- add i, 1
 100 run: newline?:boolean <- equal c, 10/newline
 100 run: break-unless newline?, 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: row <- add row, 1
 100 run: column <- copy left
 100 run: screen <- move-cursor screen, row, column
 100 run: loop +next-character:label
 100 run: done?:boolean <- greater-or-equal i, len
 100 run: break-if done?, 
 100 run: was-at-left?:boolean <- equal column, left
 100 run: clear-line-delimited screen, column, right
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
  90 print-character: 32 
 100 run: break-if was-at-left?, 
 100 run: move-cursor screen, row, left
 100 run: reply row/same-as-ingredient:5, screen/same-as-ingredient:0
  99 run: break-unless response-is-expected?:boolean, 
  99 run: jump +render-sandbox-end:label
  99 run: at-bottom?:boolean <- greater-or-equal row, screen-height
  99 run: jump-unless at-bottom?, 1:offset
  99 run: draw-horizontal screen, row, left, right, 9473/horizontal-double
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: row:number <- next-ingredient 
 100 run: x:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: style:character, style-found?:boolean <- next-ingredient 
 100 run: break-if style-found?, 
 100 run: color:number, color-found?:boolean <- next-ingredient 
 100 run: break-if color-found?, 
 100 run: color <- copy 245/grey
 100 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
 100 run: break-if bg-color-found?, 
 100 run: bg-color <- copy 0/black
 100 run: screen <- move-cursor screen, row, x
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
 100 run: print-character screen, style, color, bg-color
  90 print-character: 9473 
 100 run: x <- add x, 1
 100 run: loop 
 100 run: continue?:boolean <- lesser-or-equal x, right
 100 run: break-unless continue?, 
  99 run: next-sandbox:address:sandbox-data <- get *sandbox, next-sandbox:offset
  99 run: row, screen <- render-sandboxes screen, next-sandbox, left, right, row
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: sandbox:address:sandbox-data <- next-ingredient 
 100 run: left:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: row:number <- next-ingredient 
 100 run: jump-if sandbox, 1:offset
 100 run: reply row/same-as-ingredient:4, screen/same-as-ingredient:0
  99 run: reply row/same-as-ingredient:4, screen/same-as-ingredient:0
  98 run: clear-rest-of-screen screen, row, left, left, right
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: screen:address <- next-ingredient 
  99 run: row:number <- next-ingredient 
  99 run: left:number <- next-ingredient 
  99 run: right:number <- next-ingredient 
  99 run: row <- add row, 1
  99 run: screen <- move-cursor screen, row, left
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: screen-height:number <- screen-height screen
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: break-unless sc, 
 100 run: height:number <- get *sc, num-rows:offset
 100 run: reply height
  99 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if at-bottom-of-screen?, 
  99 run: screen <- move-cursor screen, row, left
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: clear-line-delimited screen, left, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: row <- add row, 1
  99 run: loop 
  99 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if at-bottom-of-screen?, 
  99 run: screen <- move-cursor screen, row, left
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: clear-line-delimited screen, left, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: row <- add row, 1
  99 run: loop 
  99 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if at-bottom-of-screen?, 
  99 run: screen <- move-cursor screen, row, left
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: sc:address:screen <- next-ingredient 
 100 run: new-row:number <- next-ingredient 
 100 run: new-column:number <- next-ingredient 
 100 run: break-unless sc, 
 100 run: row:address:number <- get-address *sc, cursor-row:offset
 100 run: *row <- copy new-row
 100 run: column:address:number <- get-address *sc, cursor-column:offset
 100 run: *column <- copy new-column
 100 run: reply sc/same-as-ingredient:0
  99 run: clear-line-delimited screen, left, right
 100 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
 100 run: screen:address <- next-ingredient 
 100 run: column:number <- next-ingredient 
 100 run: right:number <- next-ingredient 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
 100 run: print-character screen, 32/space
  90 print-character: 32 
 100 run: column <- add column, 1
 100 run: loop 
 100 run: done?:boolean <- greater-than column, right
 100 run: break-if done?, 
  99 run: row <- add row, 1
  99 run: loop 
  99 run: at-bottom-of-screen?:boolean <- greater-or-equal row, screen-height
  99 run: break-if at-bottom-of-screen?, 
  98 run: reply screen/same-as-ingredient:0
  97 run: trace 11, [app], [render status]
  11 app: render status 
  97 run: recipe-warnings:address:array:character <- get *env, recipe-warnings:offset
  97 run: break-unless recipe-warnings, 
  97 run: recipes:address:editor-data <- get *env, recipes:offset
  97 run: current-sandbox:address:editor-data <- get *env, current-sandbox:offset
  97 run: sandbox-in-focus?:boolean <- get *env, sandbox-in-focus?:offset
  97 run: screen <- update-cursor screen, recipes, current-sandbox, sandbox-in-focus?
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: recipes:address:editor-data <- next-ingredient 
  98 run: current-sandbox:address:editor-data <- next-ingredient 
  98 run: sandbox-in-focus?:boolean <- next-ingredient 
  98 run: break-if sandbox-in-focus?, 
  98 run: cursor-row:number <- get *recipes, cursor-row:offset
  98 run: cursor-column:number <- get *recipes, cursor-column:offset
  98 run: break-unless sandbox-in-focus?, 
  98 run: screen <- move-cursor screen, cursor-row, cursor-column
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: new-row:number <- next-ingredient 
  99 run: new-column:number <- next-ingredient 
  99 run: break-unless sc, 
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: *row <- copy new-row
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: *column <- copy new-column
  99 run: reply sc/same-as-ingredient:0
  98 run: reply screen/same-as-ingredient:0
  97 run: show-screen screen
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address <- next-ingredient 
  98 run: break-unless screen, 
  98 run: reply screen
  97 run: reply screen/same-as-ingredient:0
  96 run: break-if error?, 
  96 run: status:address:array:character <- new [            ]
  96 run: screen <- update-status screen, status, 245/grey
  97 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  97 run: screen:address <- next-ingredient 
  97 run: msg:address:array:character <- next-ingredient 
  97 run: color:number <- next-ingredient 
  97 run: screen <- move-cursor screen, 0, 2
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: sc:address:screen <- next-ingredient 
  98 run: new-row:number <- next-ingredient 
  98 run: new-column:number <- next-ingredient 
  98 run: break-unless sc, 
  98 run: row:address:number <- get-address *sc, cursor-row:offset
  98 run: *row <- copy new-row
  98 run: column:address:number <- get-address *sc, cursor-column:offset
  98 run: *column <- copy new-column
  98 run: reply sc/same-as-ingredient:0
  97 run: screen <- print-string screen, msg, color, 238/grey/background
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: screen:address:screen <- next-ingredient 
  98 run: s:address:array:character <- next-ingredient 
  98 run: color:number, color-found?:boolean <- next-ingredient 
  98 run: break-if color-found?, 
  98 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  98 run: break-if bg-color-found?, 
  98 run: len:number <- length *s
  98 run: i:number <- copy 0
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: c:character <- index *s, i
  98 run: print-character screen, c, color, bg-color
  99 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  99 run: sc:address:screen <- next-ingredient 
  99 run: c:character <- next-ingredient 
  99 run: color:number, color-found?:boolean <- next-ingredient 
  99 run: break-if color-found?, 
  99 run: bg-color:number, bg-color-found?:boolean <- next-ingredient 
  99 run: break-if bg-color-found?, 
  99 run: trace 90, [print-character], c
  90 print-character: 32 
  99 run: break-unless sc, 
  99 run: width:number <- get *sc, num-columns:offset
  99 run: height:number <- get *sc, num-rows:offset
  99 run: row:address:number <- get-address *sc, cursor-row:offset
  99 run: legal?:boolean <- greater-or-equal *row, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *row, height
  99 run: jump-if legal?, 1:offset
  99 run: column:address:number <- get-address *sc, cursor-column:offset
  99 run: legal? <- greater-or-equal *column, 0
  99 run: jump-if legal?, 1:offset
  99 run: legal? <- lesser-than *column, width
  99 run: jump-if legal?, 1:offset
  99 run: newline?:boolean <- equal c, 10/newline
  99 run: break-unless newline?, 
  99 run: index:number <- multiply *row, width
  99 run: index <- add index, *column
  99 run: buf:address:array:screen-cell <- get *sc, data:offset
  99 run: len:number <- length *buf
  99 run: backspace?:boolean <- equal c, 8
  99 run: break-unless backspace?, 
  99 run: cursor:address:screen-cell <- index-address *buf, index
  99 run: cursor-contents:address:character <- get-address *cursor, contents:offset
  99 run: *cursor-contents <- copy c
  99 run: cursor-color:address:number <- get-address *cursor, color:offset
  99 run: *cursor-color <- copy color
  99 run: right:number <- subtract width, 1
  99 run: at-right?:boolean <- greater-or-equal *column, right
  99 run: break-if at-right?, 
  99 run: *column <- add *column, 1
  99 run: reply sc/same-as-ingredient:0
  98 run: i <- add i, 1
  98 run: loop 
  98 run: done?:boolean <- greater-or-equal i, len
  98 run: break-if done?, 
  98 run: reply screen/same-as-ingredient:0
  97 run: reply screen/same-as-ingredient:0
  96 run: screen <- update-cursor screen, recipes, current-sandbox, *sandbox-in-focus?
  97 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  97 run: screen:address <- next-ingredient 
  97 run: recipes:address:editor-data <- next-ingredient 
  97 run: current-sandbox:address:editor-data <- next-ingredient 
  97 run: sandbox-in-focus?:boolean <- next-ingredient 
  97 run: break-if sandbox-in-focus?, 
  97 run: cursor-row:number <- get *recipes, cursor-row:offset
  97 run: cursor-column:number <- get *recipes, cursor-column:offset
  97 run: break-unless sandbox-in-focus?, 
  97 run: screen <- move-cursor screen, cursor-row, cursor-column
  98 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  98 run: sc:address:screen <- next-ingredient 
  98 run: new-row:number <- next-ingredient 
  98 run: new-column:number <- next-ingredient 
  98 run: break-unless sc, 
  98 run: row:address:number <- get-address *sc, cursor-row:offset
  98 run: *row <- copy new-row
  98 run: column:address:number <- get-address *sc, cursor-column:offset
  98 run: *column <- copy new-column
  98 run: reply sc/same-as-ingredient:0
  97 run: reply screen/same-as-ingredient:0
  96 run: loop +next-event:label
  96 run: e:event, console, found?:boolean, quit?:boolean <- read-event console
  97 run: default-space:address:array:location <- local-scope location:type, number-of-locals:literal
  97 run: x:address:console <- next-ingredient 
  97 run: break-unless x, 
  97 run: idx:address:number <- get-address *x, index:offset
  97 run: buf:address:array:event <- get *x, data:offset
  97 run: max:number <- length *buf
  97 run: done?:boolean <- greater-or-equal *idx, max
  97 run: break-unless done?, 
  97 run: dummy:address:event <- new event:type
  97 run: reply *dummy, x/same-as-ingredient:0, 1/found, 1/quit
  96 run: loop-unless found?, 
  96 run: break-if quit?, 
  94 run: screen-should-contain-in-color 1/red, [
    .                                        .
    .                                        .
    .                                        .
    .                                        .
    .                                        .
    .                     5                  .
    .                                        .
    .                                        .
  ]
